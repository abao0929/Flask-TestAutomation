<div class="locator-list mb-4" style="max-height: 600px; overflow-y: auto;">
  {% for locator in locators %}
  <div class="card p-3 m-2 shadow-sm d-flex flex-row flex-wrap align-items-center">
      <div class="me-4"><strong>ID:</strong> {{ locator.id }}</div>
      <div class="me-4"><strong>Name:</strong> {{ locator.name }}</div>
      <div class="me-4"><strong>Method:</strong> {{ locator.method.value }}</div>
      <div class="me-4"><strong>Value:</strong> {{ locator.value }}</div>
      <div class="me-4"><strong>Page:</strong> {{ locator.page }}</div>
      <div class="me-4"><strong>Operate:</strong> {{ locator.operate.value }}</div>
      <div class="mt-2 ms-auto d-flex gap-2">
        <a href="javascript:;" data-bs-toggle="modal" data-bs-target="#editLocatorModal{{ locator.id }}"
          class="text-warning icon-hover" title="编辑">
          <i class="bi bi-pencil fs-5"></i>
        </a>
        <form method="POST" action="{{ url_for('locator_view.delete_locator_route', locator_id=locator.id) }}" class="d-inline">
          <button type="submit" class="btn p-0 border-0 bg-transparent text-danger icon-hover" title="删除"
            style="box-shadow:none;">
            <i class="bi bi-trash fs-5"></i>
          </button>
        </form>
      </div>
  </div>

  <!-- Edit Modal for this locator -->
  <div class="modal fade" id="editLocatorModal{{ locator.id }}" tabindex="-1" aria-labelledby="editLocatorModalLabel{{ locator.id }}" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <form method="POST" action="{{ url_for('locator_view.edit_locator_modal', locator_id=locator.id) }}">
          <div class="modal-header">
            <h5 class="modal-title" id="editLocatorModalLabel{{ locator.id }}">编辑Locator</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <div class="mb-3">
              <input type="text" name="name" value="{{ locator.name }}" class="form-control" required>
            </div>
            <div class="mb-3">
              <select name="method" class="form-control" required>
                {% for method in methods %}
                <option value="{{ method.name }}" {% if locator.method.name == method.name %}selected{% endif %}>{{ method.name }}</option>
                {% endfor %}
              </select>
            </div>
            <div class="mb-3">
              <input type="text" name="value" value="{{ locator.value }}" class="form-control" required>
            </div>
            <div class="mb-3">
              <select name="page" required class="form-control">
                {% for p in pages %}
                  <option value="{{ p.name }}"
                    {% if locator and locator.page == p.name %}selected{% endif %}>
                    {{ p.name }}
                  </option>
                {% endfor %}
              </select>
            </div>
            <div class="mb-3">
              <select name="operate" class="form-control" required>
                {% for op in operates %}
                <option value="{{ op.name }}" {% if locator.operate.name == op.name %}selected{% endif %}>{{ op.name }}</option>
                {% endfor %}
              </select>
            </div>
          </div>
          <div class="modal-footer">
            <button type="submit" class="btn btn-primary">Save</button>
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          </div>
        </form>
      </div>
    </div>
  </div>
  {% endfor %}
</div>
<nav aria-label="Locator pagination">
  <ul class="pagination justify-content-center">
    {% if pagination.has_prev %}
    <li class="page-item">
      <a class="page-link page-ajax" data-page="{{ pagination.prev_num }}" href="#">←</a>
    </li>
    {% else %}
    <li class="page-item disabled"><span class="page-link">←</span></li>
    {% endif %}
    <li class="page-item disabled"><span class="page-link">Page {{ pagination.page }} of {{ pagination.pages }}</span></li>
    {% if pagination.has_next %}
    <li class="page-item">
      <a class="page-link page-ajax" data-page="{{ pagination.next_num }}" href="#">→</a>
    </li>
    {% else %}
    <li class="page-item disabled"><span class="page-link">→</span></li>
    {% endif %}
  </ul>
</nav>
